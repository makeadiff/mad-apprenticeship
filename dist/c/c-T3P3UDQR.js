import{a as y,b as C}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-EA6NQKZH.js";import{a as b,g as w}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-W4T5AHCB.js";import{a as h,d as M}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-JIZBLOSS.js";import{B as p,C as d,D as m,E as g}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-OM2EU7QX.js";import{a as _}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RQHQGLHW.js";import{b as r,c as V}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-XISRCAED.js";import{a as f,b as x}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-2DOLZMQC.js";import{a as c,d as P}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-QHP3NFJY.js";function $({thumbnailMode:e,thumbnailUrl:o,loop:a,videoUrl:i,playing:l,onLoaded:k,onPlay:v}){let s=(0,t.useRef)(null),n=e===!0,[u,B]=(0,t.useState)(!(f.isSafari()&&!n));return(0,t.useEffect)(()=>{l?(s.current?.play(),u||setTimeout(()=>B(!0),500)):s.current?.pause()},[l]),m(p,{children:[d(L,{ref:s,width:"100%",height:"100%",controls:!1,loop:!n&&a,muted:!0,playsInline:!n,poster:o,objectFit:"cover",onPlay:!n&&u?v:void 0,onLoadedMetadata:n?void 0:k,opacity:u?1:0,children:!n&&i?d("source",{src:i,type:"video/mp4"}):null}),!u&&d(y,{src:o,width:"100%",height:"100%",position:"absolute",left:0,objectFit:"cover"})]})}function N(e){let{model:o}=(0,t.useContext)(b);return d($,{...e,...o})}var t,L,E=c(()=>{"use strict";M();C();t=P(_());x();w();g();L=h.withComponent("video")});function I(){let e=window.RM.config?.root;return!e||e==="/"?"":e.slice(-1)!=="/"?e+"/":e}function S(e){if(e.provider_name!=="self")return null;if(!r.readymag_videos_cdn)throw new Error("Videos CDN URL is not exists");let{isDownloadedSource:o=!1,homepageRewrite:a=!1}=typeof window<"u"?window.RM?.common||{}:{};if(o&&!a){let i=I();return{video:`${i}${e.url}`,thumbnail:`${i}${e.thumbnail_url}`}}return{video:`${r.readymag_videos_cdn}/${e.url}`,thumbnail:`${r.readymag_videos_cdn}/${e.thumbnail_url}`}}function Z(e){return e?e.type!=="video/mp4"?"We support only .mp4 format":e.size>r.VIDEOS_UPLOAD_SIZE_LIMT?`Video file size must be less than ${Math.floor(r.VIDEOS_UPLOAD_SIZE_LIMT/1024/1024)} mb`:null:"No suitable file to upload. Please use video file."}function D(e){return!!(e&&e.provider_name==="self")}function j(e){let o=e?.video;if(o)return D(o)?S(o)?.thumbnail:o.thumbnail_url}var T=c(()=>{"use strict";V()});export{$ as a,N as b,E as c,S as d,Z as e,D as f,j as g,T as h};
