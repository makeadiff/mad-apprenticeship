import{b as s,e as p}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-G2NIBBXQ.js";import{a as d,c as f}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-HWQWJZMW.js";import{b as n,d as g}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-EEMRR3F6.js";import{b as a,c as l}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-XISRCAED.js";import{a as o,c as m}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RFIBFC7T.js";import{a as u}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-QHP3NFJY.js";function c(){return new Promise(t=>{if(o())return null;let e=document.createElement("iframe");e.style.width=s(0),e.style.height=s(0),e.style.position="absolute",e.style.left=s(-9999),e.addEventListener("load",()=>{e.contentWindow?.postMessage("GetLoggedUser","*")}),e.setAttribute("src",`${a.readymag_auth_host}/get_user_cookies.${Date.now()}`),document.body.appendChild(e),window.addEventListener("message",r=>{if(r.origin===a.readymag_auth_host){if(typeof r.data!="string")return e.remove(),t(null);try{let i=JSON.parse(r.data);if(i.event!=="user")return e.remove(),t(null);e.remove(),t(i.message)}catch{e.remove(),t(null)}}})})}function b(){let[t,e]=L();return n(()=>{o()||t.isUserLoaded||t.isLoading||(e(r=>({...r,isLoading:!0})),c().then(r=>e({user:r,isUserLoaded:!0,isLoading:!1})).catch(()=>e({user:null,isUserLoaded:!0,isLoading:!1})))},[t.isLoading,t.isUserLoaded,e]),t}var L,U=u(()=>{"use strict";g();l();p();m();f();({useStore:L}=d("Logged in user",{isLoading:!1,isUserLoaded:!1,user:null}))});export{c as a,b,U as c};
