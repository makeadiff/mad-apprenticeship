import { a as H } from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-NTU5CCMZ.js";
import { a as x } from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-UEUKGWEC.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-LKHQPPXC.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-UTUHXQPI.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-D53TRYZ6.js";
import {
  a as k,
  b as A,
  c as G,
  d as z,
  e as q,
  f as J,
  g as K,
  h as Q,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-JRIPRNZG.js";
import {
  b as _,
  d as m,
  e as $,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-7SJZCHWS.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-44CNEL7G.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-AEQY6LGK.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-P642MP5Y.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-OLKNKK4V.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-4IFLQAPG.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-CSKCUZTI.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-7ZGGP2E5.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-RBRK4WCL.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-G3Y3N2MB.js";
import {
  a as W,
  b as ge,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-4UKCF2GB.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-L7WWO6M6.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-JBAUS64S.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-FWXUQJLO.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-TQQQHF5S.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-2XET6VO7.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-5IBIYDPK.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-BKCY2VKA.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-3YUZTX2N.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-W4T5AHCB.js";
import { a as X } from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-4GL4K7GO.js";
import { a as R } from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-5OKWNNP4.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-MCJA2VBR.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-ZKNFSN7H.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-3NPNCLFW.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-MJAH2RAZ.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-WRLLBKGK.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-FFWDLTMD.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-4Y7DI6SQ.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-IHRIQMNT.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-4SCEA6MH.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-7G5N7RDK.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-55YIUUE2.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-IR3QI7WB.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-VTI42AWO.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-XGVPUU7T.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-5FZORQMA.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-RAXBYKBX.js";
import {
  s as L,
  u as ue,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-UCWHUNNS.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-4MPLDZWV.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-BDVCFFS7.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-J3USEBGX.js";
import {
  n as N,
  p as se,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-S3E6VOTB.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-7I7OLWOL.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-WVJIV5QC.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-EYCFSEYW.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-2MNI46CX.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-XVMSE7D6.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-3GVO5LHG.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-MAHC2LGO.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-W7HNLNUX.js";
import {
  a as F,
  b as me,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-RMMJDFI3.js";
import { a as O } from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-AMVN52CV.js";
import {
  a as I,
  b as ce,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-2VM4WMDG.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-HH4Q53YF.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-GGNH5IU6.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-RDXJA4GA.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-PZMEG2NF.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-4XXBP4ZF.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-WK25KKWY.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-NNQF6BRP.js";
import {
  c as j,
  d as ne,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-ESZBX7KW.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-BSALHGTM.js";
import { a as re } from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-234U5CBJ.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-UKEV2NXO.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-WOITOMNP.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-7MCOANFY.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-OF5ZUXAU.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-JIZBLOSS.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-HRLBPHLY.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-2ECMWVPA.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-7X5IMZFD.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-G2NIBBXQ.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-CKAFNI2U.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-WMCMTIVL.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-H4ZSG3VH.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-HWQWJZMW.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-EEMRR3F6.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-RED2IW26.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-HBHH3JOR.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-XYBU5ZH7.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-PQ3IAYNH.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-BDIKTVS7.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-A73AYJN4.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-E6LIND4G.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-EOUZMBYY.js";
import {
  a as E,
  b as ae,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-C2JH626I.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-XJMDX53R.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-H5KNJBLH.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-A6ELDBP5.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-GQGWMU4W.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-NDMKEPX2.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-KYWOHWQE.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-5A7ZX2DV.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-4BVKFQ7G.js";
import {
  B,
  C as s,
  E as y,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-OM2EU7QX.js";
import { a as U } from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-RQHQGLHW.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-RAPBUJGJ.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-RWHY6I2B.js";
import {
  b as l,
  c as ie,
} from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-XISRCAED.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-7E6CHA26.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-6ZBEBUM2.js";
import { a as oe } from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-AU5RUMUL.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-65MPED7X.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-B7IF4UMF.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-2DOLZMQC.js";
import "https://st-p.rmcdn.net/aab27dd3/dist/c/c-RFIBFC7T.js";
import { d as P } from "https://st-p.rmcdn.net/aab27dd3/dist/c/c-QHP3NFJY.js";
var te = P(re());
ce();
ge();
var v = P(U());
ae();
var d = P(U());
var h = P(oe());
me();
se();
ie();
ne();
ue();
y();
function pe(t) {
  if (!l.isScreenshot) {
    if (!window.RM.common.isDownloadedSource) {
      let i = window.RM?.common?.isDomainViewer === !0;
      l.isProd &&
        !i &&
        import("https://st-p.rmcdn.net/aab27dd3/dist/c/c-5CIDXFM7.js").then(
          ({ getWebVitals: p }) => {
            p();
          },
        ),
        N(t.num_id);
    }
    let o = new x();
    (window.RM.analytics = o),
      window.RM.analytics && (window.RM.analytics._triggerProjectView = !0);
  }
}
function b(t, o) {
  let i = o ? o.replace(/^\//, "") + (/\/$/.test(o) ? "" : "/") : "";
  return typeof t == "string" ? t.replace(i, "") : t;
}
function de({
  location: t,
  history: o,
  isDomainForUser: i,
  isDomainViewer: p,
  isDownloadedSource: c,
  isHomepage: w,
  exportBasePath: u,
}) {
  let g = {
      environment: l.environment.viewer,
      navigate: (a, n) => {
        n.replace ? o.replace(a) : o.push(a);
      },
      setUrlString: (a = {}) => {
        let n = r.currentPage,
          e;
        if (
          ((p && !i) || c ? (e = "") : (e = g.getMagUri()),
          n &&
            n.num !== 1 &&
            (e += (n.pagePath || n.uri || n.num.toString()) + "/"),
          e === o.location.pathname)
        )
          return;
        let f =
          (parseInt(h.default.last(o.location.pathname.split("/")) || "", 10) ||
            1) === n.num || a.replace;
        c &&
          u &&
          !e.startsWith(u) &&
          (e = u + (/\/$/.test(u) ? "" : "/") + e.replace(/^\//, "")),
          c && h.default.last(e) !== "/" && (e += "/"),
          !w &&
            g.navigate(`${e[0] !== "/" ? "/" : ""}${e}${t.search}`, {
              replace: f,
            });
      },
      setTitle: () => {
        if (!r || !r.currentPage) return;
        let a = F.getFinalSEO(r.currentPage, r, { customDomain: !!p });
        document.title = a.title || "";
      },
      getMagUri: () =>
        i
          ? (r.uri || r.num_id) + "/"
          : p
            ? ""
            : h.default.isEmpty(r.user)
              ? `${r.num_id}/`
              : `${r.user.uri}/${r.uri || r.num_id}/`,
      goBack: () => {
        o.goBack();
      },
      go: (a = 1, n) => {
        if (n.isPageNum) {
          r.showPage(a, n);
          return;
        }
        let e = c ? r.getPageByPath(b(a, u)) || {} : r.getPageByPath(a) || {};
        r.showPage(e.num || a, n);
      },
      restartMag: () => {
        window.location.reload();
      },
      onError: () => {
        r && g.go(1, { animation: !1 });
      },
    },
    r = new $(window.ServerData.mags.mag, g);
  return r;
}
function we({ pageUri: t }) {
  let {
      isDomainViewer: o,
      domainForUser: i,
      project: p,
      isDownloadedSource: c,
      homepageRewrite: w,
      exportBasePath: u,
    } = (0, d.useContext)(R),
    [g, r] = (0, d.useState)(null),
    a = q(),
    n = z();
  return (
    (0, d.useEffect)(() => {
      if (g) {
        let e = c ? g.getPageByPath(b(t, u) || "1") : g.getPageByPath(t || "1");
        e && g.currentPage !== e && g.showPage(e.num);
      }
    }, [t]),
    (0, d.useEffect)(() => {
      if (p) {
        m.setTiming("mag_loaded", Date.now());
        let e = de({
          location: a,
          history: n,
          isDomainViewer: o,
          isDownloadedSource: c,
          isDomainForUser: i,
          isHomepage: w,
          exportBasePath: u,
        });
        r(e),
          (window.RM.viewerRouter = {
            mag: e,
            environment: l.environment.viewer,
            createMagFromTemplate: async (D, M) => {
              let { default: V } = await import(
                "https://st-p.rmcdn.net/aab27dd3/dist/c/c-JOVSFCQL.js"
              );
              new V({
                router: window.RM.viewerRouter,
                me: window.RM?.data?.usersLoader?.me,
                tp: D,
                templateID: M,
              });
            },
          }),
          pe(e),
          e.hasNewTextWidgets() && L("viewer");
        let S = c && t ? b(t, u) : t || "1",
          f = e.getPageByPath(S) || e.getPage(S) || {},
          T = e.model?.attributes?.usedWidgetTypes;
        _(
          T?.length
            ? T
            : j.usedWidgets(e.pages || [], e.aboveGlobalWidgetsData),
        ).finally(() => {
          e.render(),
            e.showPage(f ? f.num : 1),
            m.setTiming("mag_rendered", Date.now());
          let D = e.currentPage.num,
            M =
              e.pages.reduce(
                (V, C) => V + (C.widgets ? C.widgets.length : 0),
                0,
              ) + e.aboveGlobalWidgets.length;
          setTimeout(() => {
            m.setTiming("dom_complete", window.performance.timing.domComplete),
              m.sendTimings({
                projectNumId: e.num_id,
                userNumId: e.user.num_id,
                viewport: e.viewport,
                startPage: D,
                widgetsCount: M,
              });
          }, 1e4);
        });
      }
    }, []),
    s(B, {})
  );
}
function le() {
  let { pageUri: t } = J();
  return s(we, { pageUri: t });
}
var Z = le;
y();
function fe(t) {
  let o = [];
  if (
    (t.isDomainViewer
      ? t.isDomainForUser
        ? o.push("/:mag/:pageUri*")
        : o.push("/:pageUri*")
      : (o.push("/:user/:project/num/:pageNum"),
        o.push("/:user/:project/:pageUri*")),
    t.isDownloadedSource &&
      (o.push("/:pageUri*"),
      /msie [6-9]/i.test(navigator.userAgent) && typeof window < "u"))
  )
    throw (
      ((window.location.href = "sorry.html"),
      new Error("Readymag does not support IE"))
    );
  return o;
}
function Pe({ ssr: t, location: o, children: i }) {
  return t ? s(A, { location: o, children: i }) : s(K, { children: i });
}
function ye({ location: t, ssr: o, ...i }) {
  let [p, c] = (0, v.useState)([]);
  (0, v.useEffect)(() => {
    let u = fe({
      isDomainViewer: i.isDomainViewer,
      isDomainForUser: i.domainForUser,
      isDownloadedSource: i.isDownloadedSource,
    });
    c(u),
      m.setTiming("dom_loaded", window.performance.timing.domLoading),
      m.setTiming(
        "scripts_loaded",
        window.performance.timing.domContentLoadedEventEnd,
      ),
      m.setTiming("router_init", Date.now());
  }, []);
  let w = i.errorPage
    ? s(X, { type: i.errorPage })
    : s(Pe, {
        ssr: o,
        location: t,
        children: s(G, { children: s(k, { path: p, children: s(Z, {}) }) }),
      });
  return s(R.Provider, { value: i, children: s(E, { children: w }) });
}
function ee() {
  Q(ye);
}
RM.common = { ...RM.common, ...window.viewerConfig };
I.setSupportedFormats();
window.onload = () => {
  document.querySelector("html").classList.add("page-loaded");
};
m.setTiming("viewer_start", Date.now());
O();
window.Backbone = H(te.default);
m.setTiming("router_create", Date.now());
W.init(window.ServerData && window.ServerData.userPermissions);
ee();
